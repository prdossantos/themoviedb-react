const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MovieCard-BnLczU8K.js","assets/react-Cn7aBO_v.js","assets/react-router-dom-CqLnuOSD.js","assets/react-dom-C6A_9beh.js","assets/scheduler-CzFDRTuY.js","assets/react-router-DMoB8goq.js","assets/@remix-run-ByNhnkJC.js"])))=>i.map(i=>d[i]);
import{R as p,j as e,r as i}from"./react-Cn7aBO_v.js";import{a as f,u as m}from"./jotai-Cxjl4ldL.js";import{_ as b,L as j}from"./index-GBwAxzqT.js";import"./react-dom-C6A_9beh.js";import"./scheduler-CzFDRTuY.js";import"./react-router-dom-CqLnuOSD.js";import"./react-router-DMoB8goq.js";import"./@remix-run-ByNhnkJC.js";const v=f([]),w=f({});f({});const L=p.lazy(()=>b(()=>import("./MovieCard-BnLczU8K.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),M=({movies:s})=>e.jsx(i.Suspense,{fallback:e.jsx(j,{}),children:e.jsx("div",{className:"grid xs:grid-cols-1 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:s.map((r,a)=>e.jsx(L,{movie:r},`${r.id}-${a}`))})}),R=({message:s,type:r="info"})=>{const a={error:"bg-red-100 border border-red-400 text-red-700",success:"bg-green-100 border border-green-400 text-green-700",info:"bg-blue-100 border border-blue-400 text-blue-700",warning:"bg-yellow-100 border border-yellow-400 text-yellow-700"};return e.jsxs("div",{className:`p-4 mb-4 rounded-lg flex items-center ${a[r]}`,role:"alert",children:[e.jsxs("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[r==="error"&&e.jsx("path",{fillRule:"evenodd",d:"M18 8a10 10 0 11-20 0 10 10 0 0120 0zm-4.707-2.293a1 1 0 00-1.414 0L10 7.586 7.121 4.707a1 1 0 00-1.414 1.414L8.586 9l-2.879 2.879a1 1 0 001.414 1.414L10 10.414l2.879 2.879a1 1 0 001.414-1.414L11.414 9l2.879-2.879a1 1 0 000-1.414z",clipRule:"evenodd"}),r==="success"&&e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707a1 1 0 10-1.414-1.414L9 11.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"}),r==="info"&&e.jsx("path",{fillRule:"evenodd",d:"M18 10A8 8 0 112 10a8 8 0 0116 0zm-8-4a1 1 0 100 2 1 1 0 000-2zm1 4a1 1 0 00-2 0v3a1 1 0 002 0v-3z",clipRule:"evenodd"}),r==="warning"&&e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.721-1.36 3.486 0l6.517 11.61c.75 1.335-.213 2.791-1.743 2.791H3.483c-1.53 0-2.493-1.456-1.743-2.79L8.257 3.1zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-5a1 1 0 00-.993.883L9 9v2a1 1 0 001.993.117L11 11V9a1 1 0 00-1-1z",clipRule:"evenodd"})]}),e.jsx("span",{className:"text-sm font-medium",children:s})]})},y=()=>{const[,s]=m(v),[r,a]=m(w);return async l=>{if(r[l]){s(t=>[...t,...r[l]]);return}const n=`undefined/movie/popular?api_key=undefined&page=${l}`;try{const t=await fetch(n);if(!t.ok)throw new Error("Failed to fetch data");const o=await t.json();a(d=>({...d,[l]:o.results})),s(d=>[...d,...o.results])}catch{throw new Error("Could not fetch movies. Please try again later.")}}},S=()=>{const[s]=m(v),[r,a]=i.useState(1),[c,l]=i.useState(!1),[n,t]=i.useState(null),o=i.useRef(null),d=y(),x=async()=>{l(!0),t(null);try{await d(r)}catch{t("Could not fetch movies. Please try again later.")}finally{l(!1)}};return i.useEffect(()=>{const u=new IntersectionObserver(h=>{h[0].isIntersecting&&!c&&!n&&a(g=>g+1)},{threshold:1});return o.current&&u.observe(o.current),()=>{o.current&&u.unobserve(o.current)}},[c,n]),i.useEffect(()=>{!c&&!n&&x()},[r]),e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-6",children:"Popular Movies"}),n&&e.jsx(R,{message:n,type:"error"}),e.jsx(M,{movies:s}),c&&e.jsx("p",{className:"text-center text-gray-400",children:"Loading..."}),e.jsx("div",{ref:o,className:"h-10"})]})};export{S as default};
